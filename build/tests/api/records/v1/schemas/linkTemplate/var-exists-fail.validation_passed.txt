Validation report for ogc.api.records.v1.schemas.linkTemplate - Schema for linkTemplate
Generated 2025-12-06T02:51:25.254623+00:00
=== General ===
Test was expected to fail and it did.
=== End General ===

=== Files ===
Using var-exists-fail.json from test resources
JSON-LD context is present - uplifting
Output JSON-LD var-exists-fail.jsonld created
Output Turtle var-exists-fail.ttl created
=== End Files ===

=== JSON Schema ===
Validation passed
=== End JSON Schema ===

=== SHACL ===

** Validation error **
Validation result for _sources/v1/schemas/linkTemplate/rules.shacl:
  Validation Report
  Conforms: False
  Results (2):
  Constraint Violation in SPARQLConstraintComponent (http://www.w3.org/ns/shacl#SPARQLConstraintComponent):
  	Severity: sh:Violation
  	Source Shape: rec:testAllVarsInTemplate
  	Focus Node: [ ns1:relation <http://www.iana.org/assignments/relation/describes> ; rdfs:label Literal("World Ozone and Ultraviolet Radiation Data Centre (WOUDC) stations") ; rec:hasVariable [ dct:format Literal("array") ; dct:identifier Literal("not-bbox") ] ; rec:uriTemplate Literal("https://geo.woudc.org/ows?crs={crs}&bbox={bbox}", datatype=xsd:string) ]
  	Value Node: [ ns1:relation <http://www.iana.org/assignments/relation/describes> ; rdfs:label Literal("World Ozone and Ultraviolet Radiation Data Centre (WOUDC) stations") ; rec:hasVariable [ dct:format Literal("array") ; dct:identifier Literal("not-bbox") ] ; rec:uriTemplate Literal("https://geo.woudc.org/ows?crs={crs}&bbox={bbox}", datatype=xsd:string) ]
  	Result Path: rec:hasVariable
  	Source Constraint: [ sh:select Literal("
        PREFIX rec:    <https://www.opengis.net/def/ogc-api/records/>
        prefix oa: <http://www.w3.org/ns/oa#>
        SELECT $this ?path ?value ?template
        WHERE {
          BIND (rec:hasVariable as ?path)
          $this rec:hasVariable/dct:identifier ?var .
          $this rec:uriTemplate ?template .
        }
        GROUP BY $this ?path ?value ?template
        HAVING ( COUNT(?var) != SUM(
           IF(
              CONTAINS(?template, CONCAT("{",?var,"}"  )),1,0 )
    ) )
  
      ") ]
  	Message: variables must exist in uri template
  Constraint Violation in SPARQLConstraintComponent (http://www.w3.org/ns/shacl#SPARQLConstraintComponent):
  	Severity: sh:Violation
  	Source Shape: rec:testAllVarsExist
  	Focus Node: [ ns1:relation <http://www.iana.org/assignments/relation/describes> ; rdfs:label Literal("World Ozone and Ultraviolet Radiation Data Centre (WOUDC) stations") ; rec:hasVariable [ dct:format Literal("array") ; dct:identifier Literal("not-bbox") ] ; rec:uriTemplate Literal("https://geo.woudc.org/ows?crs={crs}&bbox={bbox}", datatype=xsd:string) ]
  	Value Node: [ ns1:relation <http://www.iana.org/assignments/relation/describes> ; rdfs:label Literal("World Ozone and Ultraviolet Radiation Data Centre (WOUDC) stations") ; rec:hasVariable [ dct:format Literal("array") ; dct:identifier Literal("not-bbox") ] ; rec:uriTemplate Literal("https://geo.woudc.org/ows?crs={crs}&bbox={bbox}", datatype=xsd:string) ]
  	Result Path: rec:hasVariable
  	Source Constraint: [ sh:select Literal("
        PREFIX rec:    <https://www.opengis.net/def/ogc-api/records/>
        prefix oa: <http://www.w3.org/ns/oa#>
        SELECT $this ?path ?value ?template
        WHERE {
          BIND (rec:hasVariable as ?path)
          $this rec:hasVariable/dct:identifier ?var .
          $this rec:uriTemplate ?template .
        }
        GROUP BY $this ?path ?value ?template
        HAVING ( COUNT(?var) != SUM(
           IF(
              CONTAINS(?template, CONCAT("{",?var,"}"  )),1,0 )
    ) )
  
      ") ]
  	Message: variables must exist in uri template
  
Focus nodes for _sources/v1/schemas/linkTemplate/rules.shacl:
 - Shape rec:testAllVarsInTemplate: _:N6d3c9a8814504478a1b101dcf7a9830f
 - Shape rec:testAllVarsExist: _:N6d3c9a8814504478a1b101dcf7a9830f

=== End SHACL ===

